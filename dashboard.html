<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - KiNam Loyalty</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
            height: 753px;
            overflow: hidden;
        }

        .dashboard-container {
            display: flex;
            height: 100%;
            max-width: 1405px;
            margin: 0 auto;
        }

        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            max-height: 753px;
        }

        /* Header Tabs */
        .tabs-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            overflow: hidden;
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #e9ecef;
        }

        .tab {
            padding: 15px 25px;
            background: none;
            border: none;
            font-size: 14px;
            font-weight: 600;
            color: #6c757d;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab:hover {
            color: #3498db;
            background: #f8f9fa;
        }

        .tab.active {
            color: #3498db;
            background: white;
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: #3498db;
        }

        .tab-icon {
            font-size: 18px;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin-bottom: 12px;
        }

        .icon-blue { background: #e3f2fd; color: #3498db; }
        .icon-green { background: #d4edda; color: #27ae60; }
        .icon-orange { background: #fff3cd; color: #f39c12; }
        .icon-red { background: #f8d7da; color: #e74c3c; }
        .icon-purple { background: #f3e5f5; color: #9c27b0; }

        .stat-label {
            font-size: 12px;
            color: #6c757d;
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .stat-change {
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .change-positive { color: #27ae60; }
        .change-negative { color: #e74c3c; }

        /* Tier Cards */
        .tier-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .tier-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .tier-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
        }

        .tier-KiNamTravel::before { background: #95a5a6; }
        .tier-silver::before { background: #c0c0c0; }
        .tier-gold::before { background: #ffd700; }
        .tier-platinum::before { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }

        .tier-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .tier-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tier-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .tier-name {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
        }

        .tier-stats {
            margin-bottom: 15px;
        }

        .tier-member-count {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }

        .tier-percentage {
            font-size: 12px;
            color: #6c757d;
        }

        .tier-section {
            margin-bottom: 15px;
        }

        .tier-section-title {
            font-size: 12px;
            font-weight: 600;
            color: #6c757d;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .tier-list {
            list-style: none;
            padding: 0;
        }

        .tier-list li {
            font-size: 13px;
            color: #495057;
            padding: 4px 0;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .tier-list li::before {
            content: '✓';
            color: #27ae60;
            font-weight: bold;
        }

        .tier-edit-btn {
            padding: 6px 12px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tier-edit-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        /* Charts Section */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .chart-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }

        .chart-options {
            display: flex;
            gap: 10px;
        }

        .chart-option {
            padding: 5px 12px;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            font-size: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chart-option.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .chart-content {
            height: 250px;
            position: relative;
        }

        /* AI Insights */
        .ai-insights-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 20px;
            color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .ai-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .ai-icon {
            width: 35px;
            height: 35px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .ai-title {
            font-size: 16px;
            font-weight: 600;
        }

        .insight-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            font-size: 13px;
            line-height: 1.5;
            border-left: 3px solid rgba(255, 255, 255, 0.5);
        }

        .insight-item strong {
            display: block;
            margin-bottom: 4px;
            color: #ffd700;
        }

        /* AI Assistant Panel */
        .ai-panel {
            width: 320px;
            background: white;
            border-left: 1px solid #e9ecef;
            padding: 20px;
            overflow-y: auto;
            max-height: 753px;
        }

        .ai-panel-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }

        .ai-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
        }

        .ai-panel-title {
            flex: 1;
        }

        .ai-panel-title h3 {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 2px;
        }

        .ai-status {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 12px;
            color: #27ae60;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #27ae60;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .ai-suggestions {
            margin-bottom: 20px;
        }

        .suggestion-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
            border-left: 3px solid #3498db;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .suggestion-card:hover {
            background: #e3f2fd;
            transform: translateX(5px);
        }

        .suggestion-title {
            font-size: 13px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .suggestion-desc {
            font-size: 12px;
            color: #6c757d;
            line-height: 1.4;
        }

        .suggestion-action {
            font-size: 11px;
            color: #3498db;
            margin-top: 5px;
            font-weight: 600;
        }

        /* Data Table */
        .table-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .table-header {
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }

        .table-actions {
            display: flex;
            gap: 10px;
        }

        .filter-select {
            padding: 6px 12px;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            font-size: 12px;
            background: white;
        }

        .btn-export {
            padding: 6px 12px;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            font-size: 12px;
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
        }

        .btn-export:hover {
            background: #f8f9fa;
            border-color: #3498db;
            color: #3498db;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }

        .data-table th {
            background: #f8f9fa;
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
            color: #495057;
            border-bottom: 2px solid #dee2e6;
        }

        .data-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #f1f3f4;
        }

        .data-table tbody tr:hover {
            background: #f8f9fa;
        }

        /* Badge styles */
        .badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            display: inline-block;
        }

        .badge-KiNamTravel { background: #95a5a6; color: white; }
        .badge-silver { background: #c0c0c0; color: #333; }
        .badge-gold { background: #ffd700; color: #333; }
        .badge-platinum { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .badge-up { background: #d4edda; color: #155724; }
        .badge-down { background: #f8d7da; color: #721c24; }

        /* Progress bars */
        .progress-container {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .progress-blue { background: #3498db; }
        .progress-green { background: #27ae60; }
        .progress-orange { background: #f39c12; }

        /* Responsive adjustments */
        @media (max-width: 1400px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Canvas placeholder styles */
        .chart-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-size: 14px;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a1a1a1;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Tabs Navigation -->
            <div class="tabs-container">
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('members', this)">
                        <span class="tab-icon">👥</span>
                        Hội viên
                    </button>
                    <button class="tab" onclick="switchTab('tiers', this)">
                        <span class="tab-icon">🏆</span>
                        Hạng thành viên
                    </button>
                    <button class="tab" onclick="switchTab('redemption', this)">
                        <span class="tab-icon">🎁</span>
                        Đổi thưởng
                    </button>
                    <button class="tab" onclick="switchTab('campaigns', this)">
                        <span class="tab-icon">🚀</span>
                        Chương trình đang chạy
                    </button>
                </div>
            </div>

            <!-- Dynamic Content Area -->
            <div id="tabContent">
                <!-- Members Tab Content (Default) -->
                <div id="membersContent" class="tab-content">
                    <!-- Stats Cards -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon icon-blue">👥</div>
                            <div class="stat-label">Tổng số hội viên</div>
                            <div class="stat-value">12,456</div>
                            <div class="stat-change change-positive">
                                ↑ 8.5% so với tháng trước
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon icon-green">🆕</div>
                            <div class="stat-label">Hội viên mới tháng này</div>
                            <div class="stat-value">1,234</div>
                            <div class="stat-change change-positive">
                                ↑ 15% so với cùng kỳ
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon icon-orange">✅</div>
                            <div class="stat-label">Tỷ lệ hoạt động</div>
                            <div class="stat-value">68%</div>
                            <div class="stat-change change-positive">
                                ↑ 3% so với tháng trước
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon icon-red">📉</div>
                            <div class="stat-label">Tỷ lệ rời bỏ</div>
                            <div class="stat-value">2.3%</div>
                            <div class="stat-change change-negative">
                                ↑ 0.5% cần chú ý
                            </div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="charts-grid">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">📈 Tăng trưởng hội viên theo tháng</h3>
                                <div class="chart-options">
                                    <button class="chart-option active">6 tháng</button>
                                    <button class="chart-option">1 năm</button>
                                </div>
                            </div>
                            <div class="chart-content">
                                <canvas id="memberGrowthChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">📊 Phân bố kênh đăng ký</h3>
                            </div>
                            <div class="chart-content">
                                <canvas id="channelChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- AI Insights -->
                    <div class="ai-insights-card">
                        <div class="ai-header">
                            <div class="ai-icon">🤖</div>
                            <div class="ai-title">AI Insights - Phân tích hội viên</div>
                        </div>
                        <div class="insight-item">
                            <strong>📈 Dự báo tăng trưởng:</strong>
                            Dự kiến số hội viên sẽ đạt 15,000 trong 3 tháng tới với tốc độ tăng trưởng hiện tại.
                        </div>
                        <div class="insight-item">
                            <strong>⚠️ Cảnh báo churn risk:</strong>
                            Phát hiện 234 hội viên (1.9%) có nguy cơ rời bỏ cao trong 30 ngày tới dựa trên mô hình AI clustering.
                        </div>
                        <div class="insight-item">
                            <strong>💡 Gợi ý hành động:</strong>
                            Nên triển khai chiến dịch retention cho nhóm Silver (tỷ lệ churn cao nhất 3.2%) với ưu đãi nâng hạng Gold.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Assistant Panel -->
        <div class="ai-panel">
            <div class="ai-panel-header">
                <div class="ai-avatar">🤖</div>
                <div class="ai-panel-title">
                    <h3>AI Assistant</h3>
                    <div class="ai-status">
                        <span class="status-dot"></span>
                        <span>Sẵn sàng hỗ trợ</span>
                    </div>
                </div>
            </div>

            <div class="ai-suggestions">
                <h4 style="font-size: 14px; margin-bottom: 15px; color: #2c3e50;">💡 Gợi ý thông minh</h4>
                
                <div class="suggestion-card">
                    <div class="suggestion-title">🎯 Tối ưu hóa tỷ lệ chuyển đổi</div>
                    <div class="suggestion-desc">
                        Nhóm hội viên KiNamTravel có tỷ lệ chuyển đổi thấp (12%). Đề xuất giảm ngưỡng điểm lên Bạc từ 200 xuống 150 điểm.
                    </div>
                    <div class="suggestion-action">→ Xem chi tiết phân tích</div>
                </div>

                <div class="suggestion-card">
                    <div class="suggestion-title">📊 Phân khúc khách hàng mới</div>
                    <div class="suggestion-desc">
                        AI phát hiện 3 nhóm khách hàng tiềm năng chưa được khai thác: Du khách công tác (23%), Gia đình trẻ (18%), Senior travelers (15%).
                    </div>
                    <div class="suggestion-action">→ Tạo chiến dịch phân khúc</div>
                </div>

                <div class="suggestion-card">
                    <div class="suggestion-title">⚠️ Cảnh báo tồn kho</div>
                    <div class="suggestion-desc">
                        Voucher Tour 500K sắp hết (còn 23/300). Dự báo hết hàng trong 3 ngày với tốc độ đổi hiện tại.
                    </div>
                    <div class="suggestion-action">→ Bổ sung tồn kho</div>
                </div>
            </div>

            <div class="ai-suggestions">
                <h4 style="font-size: 14px; margin-bottom: 15px; color: #2c3e50;">📈 Dự báo xu hướng</h4>
                
                <div class="suggestion-card">
                    <div class="suggestion-title">📅 Dự báo Q1/2025</div>
                    <div class="suggestion-desc">
                        • Hội viên mới: +2,800 (↑23%)<br>
                        • Điểm phát hành: 5.2M<br>
                        • Doanh thu loyalty: 450M
                    </div>
                    <div class="suggestion-action">→ Xem báo cáo chi tiết</div>
                </div>

                <div class="suggestion-card">
                    <div class="suggestion-title">🔄 Chu kỳ mua sắm</div>
                    <div class="suggestion-desc">
                        Phát hiện chu kỳ: Hội viên Gold đặt tour trung bình mỗi 3.5 tháng. Nên gửi reminder sau 3 tháng không hoạt động.
                    </div>
                    <div class="suggestion-action">→ Thiết lập automation</div>
                </div>
            </div>

            <div class="ai-suggestions">
                <h4 style="font-size: 14px; margin-bottom: 15px; color: #2c3e50;">🎬 Hành động nhanh</h4>
                
                <button style="width: 100%; padding: 12px; background: #3498db; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; margin-bottom: 10px;">
                    📊 Tạo báo cáo tuần
                </button>
                <button style="width: 100%; padding: 12px; background: #27ae60; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; margin-bottom: 10px;">
                    📧 Gửi email campaign
                </button>
                <button style="width: 100%; padding: 12px; background: #f39c12; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">
                    🎯 Phân tích chuyên sâu
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Sample data 
        const dashboardData = {
            members: {
                total: 12456,
                newThisMonth: 1234,
                activeRate: 68,
                churnRate: 2.3,
                monthlyGrowth: [8500, 9200, 10100, 10800, 11500, 12456],
                channels: { App: 45, Web: 35, POS: 20 }
            },
            tiers: {
                KiNamTravel: {
                    count: 5846,
                    percentage: 46.9,
                    conditions: ['0 - 199 điểm Vàng', 'Hoặc dưới 3 tour/năm'],
                    benefits: ['Tích điểm 1x', 'Newsletter hàng tháng', 'Ưu đãi sinh nhật']
                },
                silver: {
                    count: 3989,
                    percentage: 32.0,
                    conditions: ['200 - 699 điểm Vàng', 'Hoặc 3-6 tour/năm'],
                    benefits: ['Tích điểm 1.2x', 'Ưu đãi sinh nhật 200 điểm', 'Phòng chờ sân bay 2 lần/năm', 'Voucher giảm 5%']
                },
                gold: {
                    count: 2311,
                    percentage: 18.6,
                    conditions: ['700 - 1499 điểm Vàng', 'Hoặc 7-9 tour/năm'],
                    benefits: ['Tích điểm 1.5x', 'Ưu đãi sinh nhật 500 điểm', 'Phòng chờ sân bay 4 lần/năm', 'Nâng hạng phòng 2 lần/năm', 'Voucher giảm 10%']
                },
                platinum: {
                    count: 310,
                    percentage: 2.5,
                    conditions: ['Trên 1500 điểm Vàng', 'Hoặc trên 10 tour/năm'],
                    benefits: ['Tích điểm 2x', 'Ưu đãi sinh nhật 1000 điểm', 'Phòng chờ không giới hạn', 'Nâng hạng phòng 4 lần/năm', 'Voucher giảm 15%', 'Quà VIP định kỳ']
                }
            },
            tierHistory: [
                {time: '15/12/2024 00:05', member: 'Nguyễn Văn An', oldTier: 'Bạc', newTier: 'Vàng', reason: 'Đạt 700 điểm', points: 725, change: 'up'},
                {time: '15/12/2024 00:04', member: 'Trần Thị Bình', oldTier: 'Vàng', newTier: 'Bạch kim', reason: 'Đạt 2000 điểm', points: 2150, change: 'up'},
                {time: '15/12/2024 00:03', member: 'Lê Văn Cường', oldTier: 'KiNamTravel', newTier: 'Bạc', reason: 'Đạt 200 điểm', points: 215, change: 'up'},
                {time: '15/12/2024 00:02', member: 'Phạm Thị Dung', oldTier: 'Vàng', newTier: 'Bạc', reason: 'Không đủ điểm duy trì', points: 450, change: 'down'},
                {time: '14/12/2024 23:58', member: 'Hoàng Minh Tú', oldTier: 'Bạc', newTier: 'Vàng', reason: 'Đạt 700 điểm', points: 712, change: 'up'},
                {time: '14/12/2024 23:45', member: 'Vũ Thu Hà', oldTier: 'KiNamTravel', newTier: 'Bạc', reason: 'Đạt 200 điểm', points: 203, change: 'up'},
                {time: '14/12/2024 22:30', member: 'Đỗ Văn Nam', oldTier: 'Bạc', newTier: 'Vàng', reason: 'Đạt 7 tour/năm', points: 680, change: 'up'},
                {time: '14/12/2024 21:15', member: 'Cao Thị Lan', oldTier: 'Vàng', newTier: 'Bạch kim', reason: 'Đạt 1500 điểm', points: 1523, change: 'up'}
            ],
            redemption: {
                totalRewards: 456,
                pointsRedeemed: 2800000,
                inventory: 12345,
                monthlyRedemption: [350000, 420000, 380000, 450000, 480000, 450000],
                topRewards: [
                    {name: 'Voucher Tour 500K', count: 1234, percentage: 35},
                    {name: 'Voucher Tour 200K', count: 856, percentage: 24},
                    {name: 'Bình giữ nhiệt', count: 432, percentage: 12},
                    {name: 'Balo du lịch', count: 321, percentage: 9},
                    {name: 'Voucher CGV', count: 298, percentage: 8}
                ],
                rewardTypes: {Voucher: 45, Physical: 35, Privilege: 20}
            },
            campaigns: {
                active: 5,
                pointsIssued: 1200000,
                participationRate: 45,
                performance: [
                    {name: 'Summer x2', participants: 3456, points: 450000, kpi: 120},
                    {name: 'Refer Friend', participants: 1234, points: 185000, kpi: 85},
                    {name: 'Birthday', participants: 892, points: 178000, kpi: 95},
                    {name: 'Early Bird', participants: 567, points: 98000, kpi: 78},
                    {name: 'Flash Sale', participants: 234, points: 45000, kpi: 45}
                ],
                funnel: {registered: 5000, active: 3500, redeemed: 1200}
            }
        };

        // Initialize charts
        let memberGrowthChart = null;
        let channelChart = null;
        let redemptionBarChart = null;
        let redemptionDonutChart = null;
        let redemptionLineChart = null;
        let campaignColumnChart = null;
        let campaignFunnelChart = null;

        // Switch between tabs
        function switchTab(tabName, element) {
            // Update active tab
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            element.classList.add('active');

            // Clear content
            const contentArea = document.getElementById('tabContent');
            
            // Load content based on tab
            switch(tabName) {
                case 'members':
                    loadMembersTab();
                    break;
                case 'tiers':
                    loadTiersTab();
                    break;
                case 'redemption':
                    loadRedemptionTab();
                    break;
                case 'campaigns':
                    loadCampaignsTab();
                    break;
            }
        }

        // Load Members Tab
        function loadMembersTab() {
            const content = `
                <div class="tab-content">
                    <!-- Stats Cards -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon icon-blue">👥</div>
                            <div class="stat-label">Tổng số hội viên</div>
                            <div class="stat-value">12,456</div>
                            <div class="stat-change change-positive">
                                ↑ 8.5% so với tháng trước
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon icon-green">🆕</div>
                            <div class="stat-label">Hội viên mới tháng này</div>
                            <div class="stat-value">1,234</div>
                            <div class="stat-change change-positive">
                                ↑ 15% so với cùng kỳ
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon icon-orange">✅</div>
                            <div class="stat-label">% Hoạt động</div>
                            <div class="stat-value">68%</div>
                            <div class="stat-change change-positive">
                                ↑ 3% so với tháng trước
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon icon-red">📉</div>
                            <div class="stat-label">% Rời bỏ</div>
                            <div class="stat-value">2.3%</div>
                            <div class="stat-change change-negative">
                                ↑ 0.5% cần chú ý
                            </div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="charts-grid">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">📈 Tăng trưởng hội viên theo tháng</h3>
                                <div class="chart-options">
                                    <button class="chart-option active">6 tháng</button>
                                    <button class="chart-option">1 năm</button>
                                </div>
                            </div>
                            <div class="chart-content">
                                <canvas id="memberGrowthChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">📊 Phân bố theo kênh đăng ký</h3>
                            </div>
                            <div class="chart-content">
                                <canvas id="channelChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- AI Insights -->
                    <div class="ai-insights-card">
                        <div class="ai-header">
                            <div class="ai-icon">🤖</div>
                            <div class="ai-title">AI Insights - Phân tích hội viên</div>
                        </div>
                        <div class="insight-item">
                            <strong>📈 Dự báo churn:</strong>
                            234 hội viên (1.9%) có nguy cơ rời bỏ cao trong 30 ngày tới. Nhóm Bạc chiếm 65% trong số này.
                        </div>
                        <div class="insight-item">
                            <strong>🎯 Dự báo HV mới:</strong>
                            Dự kiến tháng sau: +1,450 HV mới (↑17.5%). Kênh App dự kiến tăng mạnh nhất (+25%).
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('tabContent').innerHTML = content;
            setTimeout(() => initializeMemberCharts(), 100);
        }

        // Load Tiers Tab
        function loadTiersTab() {
            const tierData = dashboardData.tiers;
            const history = dashboardData.tierHistory;
            
            const content = `
                <div class="tab-content">
                    <!-- Tier Cards -->
                    <div class="tier-cards">
                        <!-- KiNamTravel Card -->
                        <div class="tier-card tier-KiNamTravel">
                            <div class="tier-header">
                                <div class="tier-info">
                                    <div class="tier-icon" style="background: #95a5a6;">🎫</div>
                                    <div class="tier-name">KiNamTravel</div>
                                </div>
                                
                            </div>
                            <div class="tier-stats">
                                <div class="tier-member-count">${tierData.KiNamTravel.count.toLocaleString()}</div>
                                <div class="tier-percentage">${tierData.KiNamTravel.percentage}% tổng hội viên</div>
                            </div>
                            <div class="tier-section">
                                <div class="tier-section-title">Điều kiện đạt hạng</div>
                                <ul class="tier-list">
                                    ${tierData.KiNamTravel.conditions.map(c => `<li>${c}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="tier-section">
                                <div class="tier-section-title">Quyền lợi áp dụng</div>
                                <ul class="tier-list">
                                    ${tierData.KiNamTravel.benefits.map(b => `<li>${b}</li>`).join('')}
                                </ul>
                            </div>
                        </div>

                        <!-- Silver Card -->
                        <div class="tier-card tier-silver">
                            <div class="tier-header">
                                <div class="tier-info">
                                    <div class="tier-icon" style="background: #c0c0c0;">🥈</div>
                                    <div class="tier-name">Silver (Bạc)</div>
                                </div>
                                
                            </div>
                            <div class="tier-stats">
                                <div class="tier-member-count">${tierData.silver.count.toLocaleString()}</div>
                                <div class="tier-percentage">${tierData.silver.percentage}% tổng hội viên</div>
                            </div>
                            <div class="tier-section">
                                <div class="tier-section-title">Điều kiện đạt hạng</div>
                                <ul class="tier-list">
                                    ${tierData.silver.conditions.map(c => `<li>${c}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="tier-section">
                                <div class="tier-section-title">Quyền lợi áp dụng</div>
                                <ul class="tier-list">
                                    ${tierData.silver.benefits.map(b => `<li>${b}</li>`).join('')}
                                </ul>
                            </div>
                        </div>

                        <!-- Gold Card -->
                        <div class="tier-card tier-gold">
                            <div class="tier-header">
                                <div class="tier-info">
                                    <div class="tier-icon" style="background: #ffd700;">🥇</div>
                                    <div class="tier-name">Gold (Vàng)</div>
                                </div>
                                
                            </div>
                            <div class="tier-stats">
                                <div class="tier-member-count">${tierData.gold.count.toLocaleString()}</div>
                                <div class="tier-percentage">${tierData.gold.percentage}% tổng hội viên</div>
                            </div>
                            <div class="tier-section">
                                <div class="tier-section-title">Điều kiện đạt hạng</div>
                                <ul class="tier-list">
                                    ${tierData.gold.conditions.map(c => `<li>${c}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="tier-section">
                                <div class="tier-section-title">Quyền lợi áp dụng</div>
                                <ul class="tier-list">
                                    ${tierData.gold.benefits.map(b => `<li>${b}</li>`).join('')}
                                </ul>
                            </div>
                        </div>

                        <!-- Platinum Card -->
                        <div class="tier-card tier-platinum">
                            <div class="tier-header">
                                <div class="tier-info">
                                    <div class="tier-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">💎</div>
                                    <div class="tier-name">Platinum (Bạch kim)</div>
                                </div>
                                
                            </div>
                            <div class="tier-stats">
                                <div class="tier-member-count">${tierData.platinum.count.toLocaleString()}</div>
                                <div class="tier-percentage">${tierData.platinum.percentage}% tổng hội viên</div>
                            </div>
                            <div class="tier-section">
                                <div class="tier-section-title">Điều kiện đạt hạng</div>
                                <ul class="tier-list">
                                    ${tierData.platinum.conditions.map(c => `<li>${c}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="tier-section">
                                <div class="tier-section-title">Quyền lợi áp dụng</div>
                                <ul class="tier-list">
                                    ${tierData.platinum.benefits.map(b => `<li>${b}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Tier Change History Table -->
                    <div class="table-card">
                        <div class="table-header">
                            <h3 class="table-title">📋 Lịch sử thay đổi hạng gần đây</h3>
                            <div class="table-actions">
                                <select class="filter-select" onchange="filterHistory(this.value)">
                                    <option value="7">7 ngày</option>
                                    <option value="30" selected>30 ngày</option>
                                    <option value="180">6 tháng</option>
                                </select>
                                <button class="btn-export">📥 Export CSV</button>
                            </div>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Thời gian</th>
                                    <th>Hội viên</th>
                                    <th>Hạng cũ</th>
                                    <th>Hạng mới</th>
                                    <th>Lý do</th>
                                    <th>Điểm Vàng</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${history.map(h => `
                                    <tr>
                                        <td>${h.time}</td>
                                        <td>${h.member}</td>
                                        <td><span class="badge badge-${h.oldTier.toLowerCase().replace(' ', '-')}">${h.oldTier}</span></td>
                                        <td><span class="badge badge-${h.newTier.toLowerCase().replace(' ', '-')}">${h.newTier}</span></td>
                                        <td><span class="badge badge-${h.change}">${h.reason}</span></td>
                                        <td><strong>${h.points}</strong></td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>

                    <!-- AI Insights -->
                    <div class="ai-insights-card" style="margin-top: 20px;">
                        <div class="ai-header">
                            <div class="ai-icon">🤖</div>
                            <div class="ai-title">AI Insights - Phân tích hạng thành viên</div>
                        </div>
                        <div class="insight-item">
                            <strong>📊 Phân tích chuyển hạng:</strong>
                            20% hội viên Silver (798 HV) có khả năng lên Gold trong 2 tháng tới với chi tiêu trung bình 5.2M/tháng.
                        </div>
                        <div class="insight-item">
                            <strong>💡 Gợi ý điều chỉnh quyền lợi:</strong>
                            Tăng tích điểm cho Gold từ 1.5x lên 1.7x có thể giảm tỷ lệ xuống hạng 15% và tăng retention 22%.
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('tabContent').innerHTML = content;
        }

        // Load Redemption Tab
        function loadRedemptionTab() {
            const redemptionData = dashboardData.redemption;
            
            const content = `
                <div class="tab-content">
                    <!-- Stats Cards -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon icon-blue">💎</div>
                            <div class="stat-label">Tổng điểm đã đổi</div>
                            <div class="stat-value">2.8M</div>
                            <div class="stat-change">Tháng này: 450K</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon icon-green">🎁</div>
                            <div class="stat-label">Số quà đã phát</div>
                            <div class="stat-value">3,456</div>
                            <div class="stat-change change-positive">↑ 12% vs tháng trước</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon icon-orange">📦</div>
                            <div class="stat-label">Tồn kho quà</div>
                            <div class="stat-value">12,345</div>
                            <div class="stat-change">ERP Sync: ✅</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon icon-purple">⭐</div>
                            <div class="stat-label">Quà phổ biến nhất</div>
                            <div class="stat-value" style="font-size: 20px;">Voucher 500K</div>
                            <div class="stat-change">1,234 lượt đổi</div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="charts-grid" style="grid-template-columns: repeat(3, 1fr);">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">📊 Top 5 phần quà</h3>
                            </div>
                            <div class="chart-content">
                                <canvas id="redemptionBarChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">🍩 Phân bố loại quà</h3>
                            </div>
                            <div class="chart-content">
                                <canvas id="redemptionDonutChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">📈 Tốc độ đổi quà</h3>
                            </div>
                            <div class="chart-content">
                                <canvas id="redemptionLineChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- AI Insights -->
                    <div class="ai-insights-card">
                        <div class="ai-header">
                            <div class="ai-icon">🤖</div>
                            <div class="ai-title">AI Insights - Phân tích đổi thưởng</div>
                        </div>
                        <div class="insight-item">
                            <strong>💡 Gợi ý mức điểm tối ưu:</strong>
                            Giảm điểm đổi Bình giữ nhiệt từ 500 xuống 400 có thể tăng tỷ lệ đổi 35% (từ 12% lên 16.2%).
                        </div>
                        <div class="insight-item">
                            <strong>⚠️ Cảnh báo quà sắp hết:</strong>
                            Voucher Tour 500K (còn 23), Balo du lịch (còn 12) sẽ hết trong 3-5 ngày với tốc độ hiện tại.
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('tabContent').innerHTML = content;
            setTimeout(() => initializeRedemptionCharts(), 100);
        }

        // Load Campaigns Tab
        function loadCampaignsTab() {
            const campaignData = dashboardData.campaigns;
            
            const content = `
                <div class="tab-content">
                    <!-- Stats Cards -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon icon-green">🚀</div>
                            <div class="stat-label">Campaign đang chạy</div>
                            <div class="stat-value">5</div>
                            <div class="stat-change">2 sắp kết thúc</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon icon-blue">💎</div>
                            <div class="stat-label">Tổng điểm phát hành</div>
                            <div class="stat-value">1.2M</div>
                            <div class="stat-change change-positive">↑ 28% vs KPI</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon icon-orange">👥</div>
                            <div class="stat-label">% Tham gia</div>
                            <div class="stat-value">45%</div>
                            <div class="stat-change change-positive">↑ 5% tuần này</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon icon-purple">📈</div>
                            <div class="stat-label">ROI Campaign</div>
                            <div class="stat-value">285%</div>
                            <div class="stat-change change-positive">Vượt KPI 85%</div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="charts-grid">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">📊 Hiệu suất từng campaign</h3>
                            </div>
                            <div class="chart-content">
                                <canvas id="campaignColumnChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3 class="chart-title">🔻 Funnel tham gia campaign</h3>
                            </div>
                            <div class="chart-content">
                                <canvas id="campaignFunnelChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- AI Insights -->
                    <div class="ai-insights-card">
                        <div class="ai-header">
                            <div class="ai-icon">🤖</div>
                            <div class="ai-title">AI Insights - Phân tích chương trình</div>
                        </div>
                        <div class="insight-item">
                            <strong>🎯 Dự báo campaign thành công:</strong>
                            "Summer x2 Points" đạt 120% KPI, ROI 320%. Model này nên replicate cho Q1/2025.
                        </div>
                        <div class="insight-item">
                            <strong>⚠️ Cảnh báo hiệu suất thấp:</strong>
                            "Flash Sale" chỉ đạt 45% KPI. Đề xuất tăng thời gian từ 3h lên 6h và mở rộng đối tượng.
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('tabContent').innerHTML = content;
            setTimeout(() => initializeCampaignCharts(), 100);
        }

        // Initialize member charts
        function initializeMemberCharts() {
            // Destroy existing charts
            if (memberGrowthChart) memberGrowthChart.destroy();
            if (channelChart) channelChart.destroy();

            // Member Growth Line Chart
            const growthCtx = document.getElementById('memberGrowthChart');
            if (growthCtx) {
                memberGrowthChart = new Chart(growthCtx, {
                    type: 'line',
                    data: {
                        labels: ['T7', 'T8', 'T9', 'T10', 'T11', 'T12'],
                        datasets: [{
                            label: 'Số hội viên',
                            data: dashboardData.members.monthlyGrowth,
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }

            // Channel Pie Chart
            const channelCtx = document.getElementById('channelChart');
            if (channelCtx) {
                channelChart = new Chart(channelCtx, {
                    type: 'pie',
                    data: {
                        labels: ['App', 'Website', 'POS'],
                        datasets: [{
                            data: [45, 35, 20],
                            backgroundColor: ['#3498db', '#27ae60', '#f39c12']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' }
                        }
                    }
                });
            }
        }

        // Initialize redemption charts
        function initializeRedemptionCharts() {
            // Bar Chart - Top 5 rewards
            const barCtx = document.getElementById('redemptionBarChart');
            if (barCtx) {
                redemptionBarChart = new Chart(barCtx, {
                    type: 'bar',
                    data: {
                        labels: dashboardData.redemption.topRewards.map(r => r.name),
                        datasets: [{
                            label: 'Lượt đổi',
                            data: dashboardData.redemption.topRewards.map(r => r.count),
                            backgroundColor: '#3498db'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }

            // Donut Chart - Reward types
            const donutCtx = document.getElementById('redemptionDonutChart');
            if (donutCtx) {
                redemptionDonutChart = new Chart(donutCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Voucher', 'Vật lý', 'Đặc quyền'],
                        datasets: [{
                            data: [45, 35, 20],
                            backgroundColor: ['#27ae60', '#3498db', '#f39c12']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' }
                        }
                    }
                });
            }

            // Line Chart - Redemption speed
            const lineCtx = document.getElementById('redemptionLineChart');
            if (lineCtx) {
                redemptionLineChart = new Chart(lineCtx, {
                    type: 'line',
                    data: {
                        labels: ['T7', 'T8', 'T9', 'T10', 'T11', 'T12'],
                        datasets: [{
                            label: 'Điểm đổi',
                            data: dashboardData.redemption.monthlyRedemption,
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }
        }

        // Initialize campaign charts
        function initializeCampaignCharts() {
            // Column Chart - Campaign performance
            const columnCtx = document.getElementById('campaignColumnChart');
            if (columnCtx) {
                campaignColumnChart = new Chart(columnCtx, {
                    type: 'bar',
                    data: {
                        labels: dashboardData.campaigns.performance.map(c => c.name),
                        datasets: [
                            {
                                label: 'Số HV tham gia',
                                data: dashboardData.campaigns.performance.map(c => c.participants),
                                backgroundColor: '#3498db'
                            },
                            {
                                label: 'KPI %',
                                data: dashboardData.campaigns.performance.map(c => c.kpi),
                                backgroundColor: '#27ae60',
                                yAxisID: 'y1'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                type: 'linear',
                                display: true,
                                position: 'left'
                            },
                            y1: {
                                type: 'linear',
                                display: true,
                                position: 'right',
                                grid: {
                                    drawOnChartArea: false
                                }
                            }
                        }
                    }
                });
            }

            // Funnel Chart - Participation funnel
            const funnelCtx = document.getElementById('campaignFunnelChart');
            if (funnelCtx) {
                campaignFunnelChart = new Chart(funnelCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Đăng ký', 'Active', 'Redeem'],
                        datasets: [{
                            label: 'Số hội viên',
                            data: [5000, 3500, 1200],
                            backgroundColor: ['#3498db', '#f39c12', '#27ae60']
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }
        }

        // Export functions
        function filterHistory(days) {
            console.log(`Filtering history for ${days} days`);
        }

        function exportData() {
            alert('Xuất dữ liệu dashboard sang CSV...');
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            loadMembersTab();
        });
    </script>
</body>

</html>
