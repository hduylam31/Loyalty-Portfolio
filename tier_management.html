<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1405, height=753, initial-scale=1.0">
    <title>üéñÔ∏è Qu·∫£n l√Ω H·∫°ng Th√†nh Vi√™n - KiNamtravel Loyalty</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
            color: #2c3e50;
            width: 1405px;
            height: 753px;
            overflow: hidden;
        }

        /* Container */
        .container {
            height: 100%;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Header Section */
        .header-section {
            background: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .header-title {
            font-size: 24px;
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Stats Summary */
        .stats-summary {
            display: flex;
            gap: 30px;
            padding: 15px 0;
            border-top: 1px solid #e9ecef;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            font-size: 12px;
            color: #6c757d;
            text-transform: uppercase;
        }

        /* Button Styles */
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102,126,234,0.4);
        }

        .btn-secondary {
            background: #e9ecef;
            color: #495057;
        }

        .btn-secondary:hover {
            background: #dee2e6;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
        }

        /* Tier Cards Grid */
        .tier-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        /* Tier Card */
        .tier-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            position: relative;
        }

        .tier-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .tier-header {
            padding: 20px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .tier-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 200px;
            height: 200px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }

        /* Tier specific colors */
        .tier-member .tier-header {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        }

        .tier-silver .tier-header {
            background: linear-gradient(135deg, #c0c0c0 0%, #808080 100%);
        }

        .tier-gold .tier-header {
            background: linear-gradient(135deg, #ffd700 0%, #ffb300 100%);
        }

        .tier-diamond .tier-header {
            background: linear-gradient(135deg, #b76cfd 0%, #ff00ff 100%);
        }

        .tier-name {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tier-badge {
            font-size: 24px;
        }

        .tier-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .tier-members {
            font-size: 24px;
            font-weight: 700;
        }

        .tier-percentage {
            font-size: 14px;
            opacity: 0.9;
        }

        /* Tier Body */
        .tier-body {
            padding: 20px;
        }

        .tier-section {
            margin-bottom: 20px;
        }

        .tier-section-title {
            font-size: 12px;
            font-weight: 600;
            color: #6c757d;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .tier-conditions {
            list-style: none;
        }

        .tier-conditions li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #495057;
        }

        .tier-conditions li::before {
            content: '‚úì';
            width: 20px;
            height: 20px;
            background: #10b981;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .tier-benefits {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .benefit-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            font-size: 13px;
        }

        .benefit-icon {
            font-size: 20px;
        }

        /* Tier Actions */
        .tier-actions {
            padding: 15px 20px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .gift-count {
            font-size: 12px;
            color: #6c757d;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 900px;
            max-height: 90%;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border: none;
            background: #f8f9fa;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #6c757d;
        }

        .modal-close:hover {
            background: #e9ecef;
        }

        .modal-body {
            padding: 20px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
        }

        .tab-btn {
            padding: 10px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #6c757d;
            position: relative;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            color: #495057;
        }

        .tab-btn.active {
            color: #667eea;
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Gift Table */
        .gift-table {
            width: 100%;
            border-collapse: collapse;
        }

        .gift-table thead {
            background: #f8f9fa;
        }

        .gift-table th {
            padding: 12px;
            text-align: left;
            font-size: 13px;
            font-weight: 600;
            color: #495057;
            border-bottom: 2px solid #e9ecef;
        }

        .gift-table td {
            padding: 12px;
            font-size: 14px;
            border-bottom: 1px solid #f1f3f5;
        }

        .gift-table tbody tr:hover {
            background: #f8f9fa;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }

        .empty-icon {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.3;
        }

        .empty-text {
            font-size: 14px;
            margin-bottom: 20px;
        }

        /* Badge Styles */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .badge-success {
            background: #dcfce7;
            color: #22c55e;
        }

        .badge-info {
            background: #dbeafe;
            color: #3b82f6;
        }

        .badge-warning {
            background: #fef3c7;
            color: #f59e0b;
        }

        /* Action Buttons */
        .btn-icon {
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .btn-delete {
            background: #fee2e2;
            color: #ef4444;
        }

        .btn-delete:hover {
            background: #fecaca;
        }

        /* Form Elements */
        .add-gift-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .form-label {
            font-size: 13px;
            font-weight: 500;
            color: #6c757d;
        }

        .form-select {
            padding: 8px 12px;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            font-size: 14px;
            background: white;
        }

        .form-select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
        }

        .modal-footer {
            padding: 20px;
            border-top: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header-section">
            <div class="header-top">
                <h1 class="header-title">
                    üéñÔ∏è Qu·∫£n l√Ω H·∫°ng Th√†nh Vi√™n
                </h1>
                <button class="btn btn-primary" onclick="exportReport()">
                    üìä Xu·∫•t b√°o c√°o
                </button>
            </div>
            
            <!-- Stats Summary -->
            <div class="stats-summary">
                <div class="stat-item">
                    <div class="stat-value">8,676</div>
                    <div class="stat-label">T·ªïng th√†nh vi√™n</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">4</div>
                    <div class="stat-label">S·ªë h·∫°ng</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">85%</div>
                    <div class="stat-label">T·ªâ l·ªá gi·ªØ h·∫°ng</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">245</div>
                    <div class="stat-label">ThƒÉng h·∫°ng th√°ng n√†y</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">12</div>
                    <div class="stat-label">Ph·∫ßn qu√† ƒë√£ c·∫•u h√¨nh</div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="tier-cards-grid">
                <!-- Member Tier Card -->
                <div class="tier-card tier-member">
                    <div class="tier-header">
                        <div class="tier-name">
                            <span class="tier-badge">üü¢</span>
                            H·∫°ng Th√†nh Vi√™n
                        </div>
                        <div class="tier-stats">
                            <div>
                                <div class="tier-members">5,000</div>
                                <div class="tier-percentage">57.6% t·ªïng h·ªôi vi√™n</div>
                            </div>
                        </div>
                    </div>
                    <div class="tier-body">
                        <div class="tier-section">
                            <div class="tier-section-title">ƒêi·ªÅu ki·ªán ƒë·∫°t h·∫°ng</div>
                            <ul class="tier-conditions">
                                <li>ƒêƒÉng k√Ω th√†nh vi√™n th√†nh c√¥ng</li>
                                <li>T√≠ch l≈©y d∆∞·ªõi 200 ƒëi·ªÉm/nƒÉm</li>
                                <li>T·ªâ l·ªá t√≠ch ƒëi·ªÉm: 2%</li>
                            </ul>
                        </div>
                        <div class="tier-section">
                            <div class="tier-section-title">Quy·ªÅn l·ª£i n·ªïi b·∫≠t</div>
                            <div class="tier-benefits">
                                <div class="benefit-item">
                                    <span class="benefit-icon">üìß</span>
                                    <span>Nh·∫≠n th√¥ng tin ∆∞u ƒë√£i qua email</span>
                                </div>
                                <div class="benefit-item">
                                    <span class="benefit-icon">üéÅ</span>
                                    <span>Tham gia ch∆∞∆°ng tr√¨nh t√≠ch ƒëi·ªÉm</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tier-actions">
                        <span class="gift-count">Ch∆∞a c·∫•u h√¨nh qu√†</span>
                        <button class="btn btn-primary" onclick="openConfigModal('member')">
                            ‚öôÔ∏è C·∫•u h√¨nh
                        </button>
                    </div>
                </div>

                <!-- Silver Tier Card -->
                <div class="tier-card tier-silver">
                    <div class="tier-header">
                        <div class="tier-name">
                            <span class="tier-badge">ü•à</span>
                            H·∫°ng B·∫°c
                        </div>
                        <div class="tier-stats">
                            <div>
                                <div class="tier-members">2,500</div>
                                <div class="tier-percentage">28.8% t·ªïng h·ªôi vi√™n</div>
                            </div>
                        </div>
                    </div>
                    <div class="tier-body">
                        <div class="tier-section">
                            <div class="tier-section-title">ƒêi·ªÅu ki·ªán ƒë·∫°t h·∫°ng</div>
                            <ul class="tier-conditions">
                                <li>200-699 ƒëi·ªÉm trong 12 th√°ng</li>
                                <li>Ho·∫∑c 4-6 tour trong nƒÉm</li>
                                <li>T·ªâ l·ªá t√≠ch ƒëi·ªÉm: 5%</li>
                            </ul>
                        </div>
                        <div class="tier-section">
                            <div class="tier-section-title">Quy·ªÅn l·ª£i n·ªïi b·∫≠t</div>
                            <div class="tier-benefits">
                                <div class="benefit-item">
                                    <span class="benefit-icon">‚úàÔ∏è</span>
                                    <span>∆Øu ti√™n l√†m th·ªß t·ª•c s√¢n bay</span>
                                </div>
                                <div class="benefit-item">
                                    <span class="benefit-icon">üé∞</span>
                                    <span>1 l∆∞·ª£t Lucky Wheel/th√°ng</span>
                                </div>
                                <div class="benefit-item">
                                    <span class="benefit-icon">üéüÔ∏è</span>
                                    <span>Voucher Shopee 100K</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tier-actions">
                        <span class="gift-count">2 qu√† ƒë√£ c·∫•u h√¨nh</span>
                        <button class="btn btn-primary" onclick="openConfigModal('silver')">
                            ‚öôÔ∏è C·∫•u h√¨nh
                        </button>
                    </div>
                </div>

                <!-- Gold Tier Card -->
                <div class="tier-card tier-gold">
                    <div class="tier-header">
                        <div class="tier-name">
                            <span class="tier-badge">ü•á</span>
                            H·∫°ng V√†ng
                        </div>
                        <div class="tier-stats">
                            <div>
                                <div class="tier-members">800</div>
                                <div class="tier-percentage">9.2% t·ªïng h·ªôi vi√™n</div>
                            </div>
                        </div>
                    </div>
                    <div class="tier-body">
                        <div class="tier-section">
                            <div class="tier-section-title">ƒêi·ªÅu ki·ªán ƒë·∫°t h·∫°ng</div>
                            <ul class="tier-conditions">
                                <li>700-1499 ƒëi·ªÉm trong 12 th√°ng</li>
                                <li>Ho·∫∑c 7-9 tour trong nƒÉm</li>
                                <li>T·ªâ l·ªá t√≠ch ƒëi·ªÉm: 8%</li>
                            </ul>
                        </div>
                        <div class="tier-section">
                            <div class="tier-section-title">Quy·ªÅn l·ª£i n·ªïi b·∫≠t</div>
                            <div class="tier-benefits">
                                <div class="benefit-item">
                                    <span class="benefit-icon">üèãÔ∏è</span>
                                    <span>B√¨nh n∆∞·ªõc th·ªÉ thao cao c·∫•p</span>
                                </div>
                                <div class="benefit-item">
                                    <span class="benefit-icon">üé∞</span>
                                    <span>3 l∆∞·ª£t Lucky Wheel/th√°ng</span>
                                </div>
                                <div class="benefit-item">
                                    <span class="benefit-icon">üéÅ</span>
                                    <span>Qu√† sinh nh·∫≠t ƒë·∫∑c bi·ªát</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tier-actions">
                        <span class="gift-count">2 qu√† ƒë√£ c·∫•u h√¨nh</span>
                        <button class="btn btn-primary" onclick="openConfigModal('gold')">
                            ‚öôÔ∏è C·∫•u h√¨nh
                        </button>
                    </div>
                </div>

                <!-- Diamond Tier Card -->
                <div class="tier-card tier-diamond">
                    <div class="tier-header">
                        <div class="tier-name">
                            <span class="tier-badge">üíé</span>
                            H·∫°ng Kim C∆∞∆°ng
                        </div>
                        <div class="tier-stats">
                            <div>
                                <div class="tier-members">376</div>
                                <div class="tier-percentage">4.3% t·ªïng h·ªôi vi√™n</div>
                            </div>
                        </div>
                    </div>
                    <div class="tier-body">
                        <div class="tier-section">
                            <div class="tier-section-title">ƒêi·ªÅu ki·ªán ƒë·∫°t h·∫°ng</div>
                            <ul class="tier-conditions">
                                <li>Tr√™n 1500 ƒëi·ªÉm trong 12 th√°ng</li>
                                <li>Ho·∫∑c tr√™n 10 tour trong nƒÉm</li>
                                <li>T·ªâ l·ªá t√≠ch ƒëi·ªÉm: 10%</li>
                            </ul>
                        </div>
                        <div class="tier-section">
                            <div class="tier-section-title">Quy·ªÅn l·ª£i n·ªïi b·∫≠t</div>
                            <div class="tier-benefits">
                                <div class="benefit-item">
                                    <span class="benefit-icon">üèÜ</span>
                                    <span>Ph√≤ng ch·ªù VIP s√¢n bay</span>
                                </div>
                                <div class="benefit-item">
                                    <span class="benefit-icon">‚ö°</span>
                                    <span>∆Øu ti√™n x·ª≠ l√Ω Booking</span>
                                </div>
                                <div class="benefit-item">
                                    <span class="benefit-icon">üéä</span>
                                    <span>S·ª± ki·ªán VIP ƒë·ªôc quy·ªÅn</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tier-actions">
                        <span class="gift-count">2 qu√† ƒë√£ c·∫•u h√¨nh</span>
                        <button class="btn btn-primary" onclick="openConfigModal('diamond')">
                            ‚öôÔ∏è C·∫•u h√¨nh
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Configuration Modal -->
    <div class="modal" id="configModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">C·∫•u h√¨nh ph·∫ßn qu√† thƒÉng h·∫°ng</h2>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab-btn active" onclick="switchTab('fixed')">
                        üéÅ Ph·∫ßn qu√† c·ªë ƒë·ªãnh khi ƒë·∫°t h·∫°ng
                    </button>
                    <button class="tab-btn" onclick="switchTab('recurring')">
                        üîÑ Ph·∫ßn qu√† ƒë·ªãnh k·ª≥ khi gi·ªØ h·∫°ng
                    </button>
                </div>

                <!-- Tab Content: Fixed Gifts -->
                <div class="tab-content active" id="tab-fixed">
                    <div class="add-gift-section">
                        <button class="btn btn-primary" onclick="openGiftSelector('fixed')">
                            + Th√™m ph·∫ßn qu√†
                        </button>
                        <span style="margin-left: 10px; font-size: 13px; color: #6c757d;">
                            G·ª≠i m·ªôt l·∫ßn duy nh·∫•t sau khi th√†nh vi√™n l√™n h·∫°ng
                        </span>
                    </div>
                    
                    <table class="gift-table">
                        <thead>
                            <tr>
                                <th>T√™n qu√†</th>
                                <th width="120">M√£ qu√†</th>
                                <th width="100">T·ª± ƒë·ªông g·ª≠i</th>
                                <th width="200">Ghi ch√∫</th>
                                <th width="80">Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="fixedGiftsBody">
                            <!-- Dynamic content -->
                        </tbody>
                    </table>
                </div>

                <!-- Tab Content: Recurring Gifts -->
                <div class="tab-content" id="tab-recurring">
                    <div class="add-gift-section">
                        <button class="btn btn-primary" onclick="openGiftSelector('recurring')">
                            + Th√™m ph·∫ßn qu√† ƒë·ªãnh k·ª≥
                        </button>
                        <span style="margin-left: 10px; font-size: 13px; color: #6c757d;">
                            G·ª≠i ƒë·ªãnh k·ª≥ cho th√†nh vi√™n ƒëang ·ªü h·∫°ng
                        </span>
                    </div>
                    
                    <table class="gift-table">
                        <thead>
                            <tr>
                                <th>T√™n qu√†</th>
                                <th width="120">M√£ qu√†</th>
                                <th width="100">Chu k·ª≥</th>
                                <th width="100">T·ª± ƒë·ªông g·ª≠i</th>
                                <th width="200">Ghi ch√∫</th>
                                <th width="80">Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="recurringGiftsBody">
                            <!-- Dynamic content -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <div>
                    <button class="btn btn-secondary" onclick="previewTier()">
                        üëÅÔ∏è Xem tr∆∞·ªõc
                    </button>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-secondary" onclick="closeModal()">
                        H·ªßy
                    </button>
                    <button class="btn btn-primary" onclick="saveConfig()">
                        ‚úÖ L∆∞u c·∫•u h√¨nh
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data from CSV
        const tierGifts = {
            silver: {
                fixed: [
                    {
                        name: '∆Øu ti√™n l√†m th·ªß t·ª•c s√¢n bay',
                        code: 'GIFT-PRIV-001',
                        autoSend: true,
                        note: 'T·∫∑ng 1 l·∫ßn khi l√™n h·∫°ng'
                    }
                ],
                recurring: [
                    {
                        name: '1 l∆∞·ª£t Lucky Wheel',
                        code: 'GIFT-PRIV-002',
                        cycle: 'monthly',
                        autoSend: true,
                        note: 'T·∫∑ng m·ªói th√°ng khi gi·ªØ h·∫°ng b·∫°c'
                    }
                ]
            },
            gold: {
                fixed: [
                    {
                        name: 'B√¨nh n∆∞·ªõc th·ªÉ thao',
                        code: 'GIFT-PHY-001',
                        autoSend: true,
                        note: 'Qu√† t·∫∑ng welcome khi ƒë·∫°t Gold'
                    }
                ],
                recurring: [
                    {
                        name: '3 l∆∞·ª£t Lucky Wheel',
                        code: 'GIFT-PRIV-003',
                        cycle: 'monthly',
                        autoSend: true,
                        note: 'T·∫∑ng ƒë·ªÅu m·ªói th√°ng'
                    }
                ]
            },
            diamond: {
                fixed: [
                    {
                        name: 'Ph√≤ng ch·ªù VIP s√¢n bay',
                        code: 'GIFT-PRIV-004',
                        autoSend: true,
                        note: 'T·∫∑ng 1 l·∫ßn khi l√™n Kim c∆∞∆°ng'
                    }
                ],
                recurring: [
                    {
                        name: '∆Øu ti√™n x·ª≠ l√Ω Booking',
                        code: 'GIFT-PRIV-005',
                        cycle: 'quarterly',
                        autoSend: true,
                        note: '√Åp d·ª•ng ∆∞u ti√™n CSKH'
                    }
                ]
            },
            member: {
                fixed: [],
                recurring: []
            }
        };

        // Available gifts from reward management
        const availableGifts = [
            { code: 'GIFT-PRIV-001', name: '∆Øu ti√™n l√†m th·ªß t·ª•c s√¢n bay', type: 'privilege', purpose: 'tier' },
            { code: 'GIFT-PRIV-002', name: '1 l∆∞·ª£t Lucky Wheel', type: 'privilege', purpose: 'tier' },
            { code: 'GIFT-PRIV-003', name: '3 l∆∞·ª£t Lucky Wheel', type: 'privilege', purpose: 'tier' },
            { code: 'GIFT-PRIV-004', name: 'Ph√≤ng ch·ªù VIP s√¢n bay', type: 'privilege', purpose: 'tier' },
            { code: 'GIFT-PRIV-005', name: '∆Øu ti√™n x·ª≠ l√Ω Booking', type: 'privilege', purpose: 'tier' },
            { code: 'GIFT-PHY-001', name: 'B√¨nh n∆∞·ªõc th·ªÉ thao', type: 'physical', purpose: 'tier' },
            { code: 'GIFT-PHY-002', name: 'Balo du l·ªãch KiNamtravel', type: 'physical', purpose: 'tier' },
            { code: 'GIFT-DIG-001', name: 'Voucher Shopee 100K', type: 'digital', purpose: 'tier' },
            { code: 'GIFT-DIG-002', name: 'Voucher Grab 200K', type: 'digital', purpose: 'tier' }
        ];

        let currentTier = null;
        let currentTab = 'fixed';

        // Open configuration modal
        function openConfigModal(tier) {
            currentTier = tier;
            const tierNames = {
                member: 'H·∫°ng Th√†nh Vi√™n',
                silver: 'H·∫°ng B·∫°c',
                gold: 'H·∫°ng V√†ng',
                diamond: 'H·∫°ng Kim C∆∞∆°ng'
            };
            
            document.getElementById('modalTitle').textContent = `C·∫•u h√¨nh ph·∫ßn qu√† thƒÉng h·∫°ng - ${tierNames[tier]}`;
            
            // Load gifts for this tier
            loadTierGifts();
            
            // Show modal
            document.getElementById('configModal').classList.add('show');
        }

        // Load tier gifts
        function loadTierGifts() {
            if (!currentTier) return;
            
            const gifts = tierGifts[currentTier];
            
            // Load fixed gifts
            const fixedBody = document.getElementById('fixedGiftsBody');
            if (gifts.fixed.length === 0) {
                fixedBody.innerHTML = `
                    <tr>
                        <td colspan="5" class="empty-state">
                            <div class="empty-icon">üéÅ</div>
                            <div class="empty-text">Ch∆∞a c√≥ ph·∫ßn qu√† c·ªë ƒë·ªãnh n√†o</div>
                        </td>
                    </tr>
                `;
            } else {
                fixedBody.innerHTML = gifts.fixed.map(gift => `
                    <tr>
                        <td>${gift.name}</td>
                        <td><code>${gift.code}</code></td>
                        <td>
                            <span class="badge ${gift.autoSend ? 'badge-success' : 'badge-warning'}">
                                ${gift.autoSend ? 'C√≥' : 'Kh√¥ng'}
                            </span>
                        </td>
                        <td>${gift.note}</td>
                        <td>
                            <button class="btn-icon btn-delete" onclick="removeGift('${gift.code}', 'fixed')">
                                üóëÔ∏è
                            </button>
                        </td>
                    </tr>
                `).join('');
            }
            
            // Load recurring gifts
            const recurringBody = document.getElementById('recurringGiftsBody');
            if (gifts.recurring.length === 0) {
                recurringBody.innerHTML = `
                    <tr>
                        <td colspan="6" class="empty-state">
                            <div class="empty-icon">üîÑ</div>
                            <div class="empty-text">Ch∆∞a c√≥ ph·∫ßn qu√† ƒë·ªãnh k·ª≥ n√†o</div>
                        </td>
                    </tr>
                `;
            } else {
                recurringBody.innerHTML = gifts.recurring.map(gift => {
                    const cycleLabels = {
                        'monthly': 'H√†ng th√°ng',
                        'quarterly': 'H√†ng qu√Ω',
                        'yearly': 'H√†ng nƒÉm'
                    };
                    return `
                        <tr>
                            <td>${gift.name}</td>
                            <td><code>${gift.code}</code></td>
                            <td>
                                <span class="badge badge-info">
                                    ${cycleLabels[gift.cycle] || gift.cycle}
                                </span>
                            </td>
                            <td>
                                <span class="badge ${gift.autoSend ? 'badge-success' : 'badge-warning'}">
                                    ${gift.autoSend ? 'C√≥' : 'Kh√¥ng'}
                                </span>
                            </td>
                            <td>${gift.note}</td>
                            <td>
                                <button class="btn-icon btn-delete" onclick="removeGift('${gift.code}', 'recurring')">
                                    üóëÔ∏è
                                </button>
                            </td>
                        </tr>
                    `;
                }).join('');
            }
        }

        // Switch tab
        function switchTab(tab) {
            currentTab = tab;
            
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`tab-${tab}`).classList.add('active');
        }

        // Open gift selector
        function openGiftSelector(type) {
            // Filter available gifts (only privilege type for tier purpose)
            const filteredGifts = availableGifts.filter(g => g.purpose === 'tier');
            
            // Create selection dialog
            const giftList = filteredGifts.map(gift => 
                `${gift.name} (${gift.code})`
            ).join('\n');
            
            const selected = prompt(`Ch·ªçn ph·∫ßn qu√†:\n\n${giftList}\n\nNh·∫≠p m√£ qu√†:`);
            
            if (selected) {
                const gift = availableGifts.find(g => g.code === selected);
                if (gift) {
                    if (type === 'recurring') {
                        const cycle = prompt('Chu k·ª≥ t·∫∑ng qu√†:\n1. H√†ng th√°ng\n2. H√†ng qu√Ω\n3. H√†ng nƒÉm\n\nNh·∫≠p s·ªë (1-3):');
                        const cycles = ['', 'monthly', 'quarterly', 'yearly'];
                        
                        if (cycles[cycle]) {
                            addGift(gift, type, cycles[cycle]);
                        }
                    } else {
                        addGift(gift, type);
                    }
                }
            }
        }

        // Add gift to tier
        function addGift(gift, type, cycle = null) {
            const newGift = {
                name: gift.name,
                code: gift.code,
                autoSend: true,
                note: type === 'fixed' ? 'T·∫∑ng 1 l·∫ßn khi l√™n h·∫°ng' : 'T·∫∑ng ƒë·ªãnh k·ª≥',
                ...(cycle && { cycle })
            };
            
            if (type === 'fixed') {
                tierGifts[currentTier].fixed.push(newGift);
            } else {
                tierGifts[currentTier].recurring.push(newGift);
            }
            
            loadTierGifts();
        }

        // Remove gift
        function removeGift(code, type) {
            if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a ph·∫ßn qu√† n√†y?')) {
                if (type === 'fixed') {
                    tierGifts[currentTier].fixed = tierGifts[currentTier].fixed.filter(g => g.code !== code);
                } else {
                    tierGifts[currentTier].recurring = tierGifts[currentTier].recurring.filter(g => g.code !== code);
                }
                loadTierGifts();
            }
        }

        // Close modal
        function closeModal() {
            document.getElementById('configModal').classList.remove('show');
            currentTier = null;
        }

        // Save configuration
        function saveConfig() {
            alert('‚úÖ C·∫•u h√¨nh ph·∫ßn qu√† ƒë√£ ƒë∆∞·ª£c l∆∞u th√†nh c√¥ng!');
            closeModal();
        }

        // Preview tier
        function previewTier() {
            alert('üé® ƒêang hi·ªÉn th·ªã preview th·∫ª h·∫°ng v·ªõi quy·ªÅn l·ª£i...');
        }

        // Export report
        function exportReport() {
            alert('üìä ƒêang xu·∫•t b√°o c√°o h·∫°ng th√†nh vi√™n...');
        }

        // Close modal on outside click
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('show');
            }
        }
    </script>
</body>

</html>
